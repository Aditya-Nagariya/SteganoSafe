<!-- This is just a partial update - add this where your navbar user menu appears -->

<!-- User menu dropdown with correct notification positioning -->
<ul class="navbar-nav ml-auto">
    {% if current_user.is_authenticated %}
        <li class="nav-item d-flex align-items-center mr-3">
            <!-- Include the improved notification component -->
            {% include 'includes/notifications.html' %}
        </li>
        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                <span class="user-name">{{ current_user.username }}</span>
                <!-- Remove the "admin" label here if the user is not an admin -->
                {% if current_user.role == 'admin' %}
                <span class="badge bg-primary ml-1">Admin</span>
                {% endif %}
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                <li><a class="dropdown-item" href="{{ url_for('dashboard') }}"><i class="bi bi-speedometer2 me-2"></i>Dashboard</a></li>
                <li><a class="dropdown-item" href="{{ url_for('profile') }}"><i class="bi bi-person me-2"></i>Profile</a></li>
                {% if current_user.role == 'admin' %}
                <li><a class="dropdown-item" href="{{ url_for('admin_bp.index') }}"><i class="bi bi-gear me-2"></i>Admin Panel</a></li>
                {% endif %}
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="{{ url_for('logout') }}"><i class="bi bi-box-arrow-right me-2"></i>Logout</a></li>
            </ul>
        </li>
    {% else %}
        <li class="nav-item">
            <a class="nav-link" href="{{ url_for('login') }}">Login</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="{{ url_for('register') }}">Register</a>
        </li>
    {% endif %}
</ul>
